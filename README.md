App42-Tic-Tac-Toe-Sample
========================

# About Game

1. Itâ€™s a multi-player turn based game.
2. The winning motive of the game is to connect three respective cross or circle in a vertical, horizontal or diagonal direction.
3. When opponent played his turn, a push notification is being sent to other opponent about his turn.

# Running Sample

This is a sample Android gaming app is made by using App42 backend platform. It uses User, Storage and Push Notification  APIs of App42 platform.
Here are the few easy steps to run this sample app.


1. [Register] (https://apphq.shephertz.com/register) with App42 platform.
2. Create an app once you are on Quick start page after registration.
3. If you are already registered, login to [AppHQ] (http://apphq.shephertz.com) console and create an app from App Manager Tab.
4. To use PushNotification service in your application open this [link] (https://code.google.com/apis/console/b/0/?noredirect&pli=1) and create a new project here.
5. Click on services option in Google console and enable Google Cloud Messaging for Android service.
6. Click on API Access tab and create a new server key for your application with blank server information.
7. Go to AppHQ console and click on Push Notification and select Android setting in Settings option.
8. Select your app and copy server key that is generated by using Google api console, and submit it.
9. Download the corona project from this repo and open it for the same.
10. Open Constant.lua file in sample app and give the value of APIkey SecretKey that you have received in step 2 or 3.
12. Modify ProjectNo in Cnnfig.lua file with your Google Project Number.
13. Build and Run 


# Design Details:

__Initialize Services:__ First you have to initialize all APP42 Services that you are going to use in your application.

Initialization has been done in main.lua & App42APIServices.lua
```
App42API:initialize(Constant.apiKey,Constant.secretKey)
local userService = App42API:buildUserService()
local pushService = App42API:buildPushNotificationService()
local storageService = App42API:buildStorageService()

function App42CallBack:onSuccess(object)
  -- Handle here for response success
end
function App42CallBack:onException(exception)
	print("Message is : "..exception:getMessage())
	print("App Error code is : "..exception:getAppErrorCode())
	print("Http Error code is "..exception:getHttpErrorCode())
	print("Detail is : "..exception:getDetails())
end
```
__Register User:__ First register yourself using our User Service API.

 User registration has been done in App42APIServices.lua

```
local App42CallBack = {}
local userName = "Nick"
local password  = "******"
local emailId = "nick@shephertz.co.in"
userService:createUser(userName,password,emailId,App42CallBack)
```
__Authenticate User:__ If you already registered with App42 than use User Service API for authentication.

  User Authentication has been done in App42APIServices.lua

```
local userName = "Nick"
local password  = "******"
userService:authenticate(userName,password,App42CallBack)
```
__Push Service registration & Push Message :__ To get Push Notification you have to register your device on APP42 using PushNotification Service API.

Device Registration is done in App42APIServices.lua

```
require("App42-Lua-SDK.DeviceType")
local userName = "Nick"
local deviceToken = "<Your_device_token>"
local deviceType = DeviceType.ANDROID
pushService:storeDeviceToken(userName,deviceToken,deviceType,App42CallBack)
```

Send Message To User


```
local userName = "Nick"
local message = "<Your_message>"
pushService:sendPushMessageToUser(userName,message,App42CallBack)
```

__Create Game :__ To challenge your friend to play game with you, you have to create a game using our Storage Service API.


```
local dbName = "Your_data_base_name"
local collectionName = "Your_colllection_name"
local json = {}
json.gameName = "Tic_Tac_Toe"
json.gameId = "1234567"
json.next = "<Next_user>"
storageService:insertJSONDocument(dbName,collectionName, json,App42CallBack)  
```

__Update Game:__ While playing game , you have to use our Storage Service API to update the game.
 
Game updating has been done in App42APIServices.lua

```
local dbName = "Your_data_base_name"
local collectionName = "Your_colllection_name"
local key = "gameId"
local value = "1234567"
local json = {}
json.gameName = "Tic_Tac_Toe"
json.gameId = "1234567"
json.next = "<Next_user>"
storageService:updateDocumentByKeyValue(dbName,collectionName,key,value, json,App42CallBack)  
```


If you have any questions or need any further assistance, please feel free to write us at support@shephertz.com.
